<html>
<script src="point.js"></script>
<script src="2dg.js"></script>
<script src="polygon.js"></script>

<body>
<canvas id="canvas" width="600" height="500" style="border:1px solid #000000"></canvas>
<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");

init(ctx);
setInterval(redraw, 100);

var a = new Point(canvas.width / 2, canvas.height / 2);
var b = new Point(10, canvas.height / 2);
var c = new Point(0, canvas.height);
var d = rescale(c, a, -100);
var edge = {p: c, q: d};

var n1 = 1;
var n2 = 2 * n1;

canvas.addEventListener('mousemove', function(evt) {
  var rect = canvas.getBoundingClientRect();
  var x = evt.clientX;
  var y = evt.clientY;
  if (y) {
    b.y = y;
    n2 = 10 * x / canvas.width;
    var u = subtract(a, b);
    //c.y = a.y + u.y * (n1 / n2);
    //c.x = a.x + u.x;
    e = rotate(d, a, Math.PI/2);
  }
});

function redraw() {
  clear();
  stroke(0);
  line(a, b);
  line(c, d);
  fill(100);
  text('n1 = 1', 10, 40);
  text('n2 = ' + Math.round(10 * n2) / 10, canvas.width / 2 + 10, 40);
}

</script>
</body>
</html>
